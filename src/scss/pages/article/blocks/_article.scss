@use "../../../functions/functions";
@use "../../../mixins/mixins";
@use "../../../variables/variables";

.article {
  // .article__container
  &__container {
    container-type: inline-size;
  }

  // .article__title
  &__title {
    margin-block-end: 24px;
    font-weight: 500;
    font-size: functions.responsive-value(28, 24);
    line-height: 1.25;
    color: variables.$color-1d1d1d;

    @media (min-width: #{1024 + 0.1px}) {
      max-inline-size: calc(100cqi - (422px + 32px));
    }

    @media (max-width: 1024px) {
      line-height: 1.1;
      letter-spacing: 0.01em;
      text-wrap: balance;
    }

    br {
      @media (max-width: 1352px) {
        display: none;
      }
    }
  }

  // .article__inner
  &__inner {
    padding-block-end: functions.responsive-value(16, 24);

    @media (min-width: #{1024 + 0.1px}) {
      display: grid;
      grid-template-columns: 1fr functions.responsive-value(422, 248);
      align-items: start;
      gap: 32px;
    }
  }

  // .article__content
  &__content {
    > *:last-child {
      margin-block-end: 0;
    }
  }

  // .article__info
  &__info {
    margin-block-end: 24px;
  }

  // .article__text
  &__text {
    margin-block-end: functions.responsive-value(32, 24);
    color: variables.$color-1d1d1d;

    &:has(+ .article__head) {
      margin-block-end: 24px;
    }

    @media (min-width: #{1024 + 0.1px}) {
      line-height: 1.6;
    }

    @media (max-width: 1024px) {
      letter-spacing: 0.01em;

      &:has(table) {
        position: relative;
        scrollbar-width: none;
        overflow-x: auto;
        overflow-y: hidden;

        &::-webkit-scrollbar {
          display: none;
        }

        > *:not(table) {
          position: sticky;
          inset-inline-start: 0;
        }
      }
    }

    > * {
      margin-block-end: 12px;

      &:has(+ ol) {
        margin-block-end: 16px;
      }
    }

    > *:last-child {
      margin-block-end: 0;
    }

    h2 {
      margin-block-end: 12px;
      font-weight: 500;
      font-size: 18px;
      line-height: 1.3;
      color: variables.$color-252626;
    }

    ul {
      list-style: disc;
      padding-inline-start: functions.responsive-value(24, 21);

      &:has(+ p) {
        margin-block-end: functions.responsive-value(32, 24);
      }
    }

    ol {
      counter-reset: article-ol;

      li {
        display: flex;
        align-items: start;
        gap: 12px;

        &:not(:last-child) {
          margin-block-end: 12px;
        }

        &::before {
          content: counter(article-ol);
          counter-increment: article-ol;
          display: flex;
          justify-content: center;
          align-items: center;
          min-inline-size: 24px;
          min-block-size: 24px;
          padding-inline: 5px;
          font-weight: 500;
          font-size: 14px;
          line-height: 1;
          letter-spacing: 0.01em;
          background-color: variables.$color-fff1db;
        }
      }
    }

    table {
      letter-spacing: 0.01em;
      border-collapse: collapse;
      border-spacing: 0;
    }

    tr {
      border-block-end: 1px solid variables.$color-e5e5e5;

      &:has(th) {
        border-block-end-color: variables.$color-1d1d1d;
      }
    }

    th,
    td {
      inline-size: 50%;

      &:has(+ th, + td) {
        padding-inline-end: 8px;

        + :is(th, td) {
          padding-inline-start: 8px;
        }
      }
    }

    th {
      padding-block: functions.responsive-value(12, 3);
      font-weight: 500;
      text-align: start;
    }

    td {
      padding-block: 12px;
      line-height: 1.3;
    }
  }

  // .article__head
  &__head {
    margin-block-end: functions.responsive-value(32, 24);
  }

  // .article__image
  &__image {
    margin-block-end: functions.responsive-value(32, 24);
    aspect-ratio: 288 / 188;
    font-size: 0;

    @media (min-width: #{1024 + 0.1px}) {
      aspect-ratio: 866 / 360;
    }
  }

  // .article__ads
  &__ads {
    margin-block-end: functions.responsive-value(32, 24);
  }

  // .article__mail
  &__mail {
    margin-block-end: functions.responsive-value(32, 24);
  }

  // .article__quote
  &__quote {
    margin-block-end: functions.responsive-value(32, 24);
  }

  // .article__advice
  &__advice {
    margin-block-end: functions.responsive-value(32, 24);
  }

  // .article__row
  &__row {
    margin-block-end: functions.responsive-value(32, 24);
  }

  // .article__aside
  &__aside {
    position: sticky;
    inset-block-start: var(--header-height);

    .scrolled & {
      inset-block-start: calc(var(--header-height) - var(--header-top-height));
    }

    .wrapper:not(.main)[data-wrapper]:has(&) {
      @media (min-width: #{1024 + 0.1px}) {
        overflow: unset;
      }
    }

    @media (max-width: 1024px) {
      display: none;
    }
  }
}

.article-info {
  display: flex;
  flex-wrap: wrap-reverse;
  align-items: center;
  row-gap: 16px;
  column-gap: functions.responsive-value(60, 16);
}

.article-actions {
  display: flex;
  align-items: center;
  gap: functions.responsive-value(24, 16);
  font-weight: 500;
  font-size: 14px;
  letter-spacing: 0.01em;
  color: variables.$color-1d1d1d;

  // .article-actions--big
  &--big {
  }

  // .article-actions__time
  &__time {
  }

  // .article-actions__items
  &__items {
    display: flex;
    align-items: center;
    gap: 8px;

    .article-actions--big & {
      gap: 24px;

      @media (max-width: 768px) {
        flex-direction: column;
        align-items: start;
      }
    }
  }
}

.article-action {
  --button-font-weight: 500;

  display: flex;
  align-items: center;
  gap: 4px;

  &[type="button"] {
    @include mixins.prefers-reduced-motion {
      transition-property: color;
      transition-duration: 0.3s;
    }

    @include mixins.hover {
      color: variables.$color-hover;
    }
  }

  // .article-action--hide
  &--hide {
    @media (max-width: 500px) {
      display: none;
    }
  }

  // .article-action__icon
  &__icon {
    flex: 0 0 auto;
    font-size: 0;
  }

  // .article-action__text
  &__text {
  }
}

.article-head {
  padding: 16px;
  font-size: 14px;
  background-color: variables.$color-fff8ed;

  // .article-head__title
  &__title {
    margin-block-end: functions.responsive-value(9.5, 5.5);
    font-weight: 500;
    letter-spacing: 0.01em;
  }

  // .article-head__list
  &__list {
    list-style: disc;
    padding-inline-start: functions.responsive-value(21, 20);
  }

  // .article-head__item
  &__item {
    &:not(:last-child) {
      margin-block-end: functions.responsive-value(7, 5);
    }
  }

  // .article-head__link
  &__link {
    letter-spacing: 0.04em;
    text-decoration: underline;
    text-decoration-skip-ink: none;
    text-underline-offset: 4px;
    color: variables.$color-1d1d1d;

    @include mixins.prefers-reduced-motion {
      transition-property: text-decoration-color;
      transition-duration: 0.3s;
    }

    @include mixins.hover {
      text-decoration-color: rgba(variables.$color-1d1d1d, 0);
    }
  }
}

.article-ads {
  container-type: inline-size;
  display: grid;
  align-items: center;
  gap: 24px;
  padding: 16px;
  background-color: variables.$color-fff8ed;

  // .article-ads--reversed
  &--reversed {
  }

  @media (min-width: #{550 + 0.1px}) {
    grid-template-columns: repeat(2, 1fr);
  }

  // .article-ads__content
  &__content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: functions.responsive-value(32, 16);

    @media (min-width: #{550 + 0.1px}) {
      align-items: start;
      padding: functions.responsive-value(24, 0);
    }
  }

  // .article-ads__text
  &__text {
    font-weight: 500;
    font-size: functions.responsive-value(24, 18);
    line-height: 1.3;
    color: variables.$color-1d1d1d;

    &[href] {
      text-decoration: 0.4px underline;
      text-decoration-skip-ink: none;
      text-underline-offset: 4px;

      @include mixins.prefers-reduced-motion {
        transition-property: text-decoration-color;
        transition-duration: 0.3s;
      }

      @include mixins.hover {
        text-decoration-color: rgba(variables.$color-1d1d1d, 0);
      }
    }

    @media (min-width: #{1024 + 0.1px}) {
      line-height: 1.46;
    }

    @media (max-width: 550px) {
      text-align: center;
    }

    span {
      white-space: nowrap;
    }
  }

  // .article-ads__button
  &__button {
    --button-padding: 16px;

    @media (max-width: 550px) {
      inline-size: 100%;
    }
  }

  // .article-ads__image
  &__image {
    aspect-ratio: 256 / 188;
    font-size: 0;

    .article-ads:not(.article-ads--reversed) & {
      @media (max-width: 550px) {
        order: -1;
      }
    }

    .article-ads--reversed & {
      order: -1;
    }

    @media (min-width: #{550 + 0.1px}) {
      aspect-ratio: 405 / 194;
    }
  }
}

.article-mail {
  padding-block: functions.responsive-value(32, 16);
  padding-inline: functions.responsive-value(64, 16);
  border: 2px solid variables.$color-hover;

  // .article-mail__content
  &__content {
    margin-block-end: 24px;
    padding-inline: functions.responsive-value(24, 0);
  }

  // .article-mail__title
  &__title {
    margin-block-end: 16px;
    font-weight: 500;
    font-size: functions.responsive-value(24, 20);
    line-height: 1.46;
    text-align: center;
    color: variables.$color-1d1d1d;

    @media (max-width: 1024px) {
      line-height: 1.2;
      letter-spacing: 0.01em;
    }
  }

  // .article-mail__text
  &__text {
    color: variables.$color-1d1d1d;

    @media (min-width: #{1024 + 0.1px}) {
      line-height: 1.6;
    }

    @media (max-width: 1024px) {
      letter-spacing: 0.01em;
    }

    ul {
      list-style: disc;
      padding-inline-start: functions.responsive-value(24, 21);
    }
  }
}

.article-form {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(216px, 1fr));
  align-items: start;
  gap: 16px;
  max-inline-size: 536px;
  margin-inline: auto;

  // .article-form__input
  &__input {
    display: flex;
    flex-direction: column-reverse;
    gap: 4px;
  }

  // .article-form__label
  &__label {
    font-size: 12px;
    line-height: 1.3;
    letter-spacing: 0.01em;
    color: variables.$color-999999;
  }

  // .article-form__email
  &__email {
    block-size: 44px;
    padding-inline: 16px;
    font-size: 14px;
    line-height: 1;
    letter-spacing: 0.01em;
    color: variables.$color-1d1d1d;
    background-color: variables.$color-ededed;
    border-block-end: 1px solid variables.$color-dadada;

    &::placeholder {
      color: variables.$color-999999;
    }
  }

  // .article-form__button
  &__button {
    --button-padding: 16px;
  }
}

.article-quote {
  padding-block: functions.responsive-value(32, 24);
  padding-inline: functions.responsive-value(32, 16);
  background-color: rgba(255, 183, 77, 0.1);

  > *:last-child {
    margin-block-end: 0;
  }

  // .article-quote__icon
  &__icon {
    inline-size: fit-content;
    margin-block-end: 24px;
    margin-inline: auto;
    font-size: 0;
    color: variables.$color-hover;
  }

  // .article-quote__text
  &__text {
    margin-block-end: 16px;
    color: variables.$color-1d1d1d;

    @media (max-width: 1024px) {
      letter-spacing: 0.01em;
    }
  }
}

.article-quote-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 14px;
  letter-spacing: 0.01em;
  text-align: center;

  // .article-quote-info__image
  &__image {
    inline-size: 50px;
    aspect-ratio: 1 / 1;
    margin-block-end: 10px;
    font-size: 0;
    border-radius: 50%;
    overflow: hidden;
  }

  // .article-quote-info__name
  &__name {
    font-weight: 500;
    color: variables.$color-1d1d1d;
  }

  // .article-quote-info__profession
  &__profession {
    line-height: 1.3;
    color: variables.$color-999999;
  }
}

.article-advice {
  padding: functions.responsive-value(32, 16);
  background-color: variables.$color-fff8ed;
  color: variables.$color-1d1d1d;

  @media (min-width: #{1024 + 0.1px}) {
    line-height: 1.6;
  }

  @media (max-width: 1024px) {
    letter-spacing: 0.01em;
  }
}

.article-row {
  container-type: inline-size;
  display: grid;
  align-items: center;
  gap: 24px;

  @media (min-width: #{550 + 0.1px}) {
    grid-template-columns: repeat(2, 1fr);
  }

  // .article-row__image
  &__image {
    aspect-ratio: 288 / 188;
    font-size: 0;

    @media (min-width: #{550 + 0.1px}) {
      aspect-ratio: 421 / 224;
    }
  }

  // .article-row__text
  &__text {
    color: variables.$color-1d1d1d;

    @media (min-width: #{1024 + 0.1px}) {
      line-height: 1.6;
    }

    @media (max-width: 1024px) {
      letter-spacing: 0.01em;
    }
  }
}

.article-footer {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-block: functions.responsive-value(32, 24) functions.responsive-value(44, 36);
  text-align: center;

  > *:last-child {
    margin-block-end: 0;
  }

  // .article-footer__title
  &__title {
    margin-block-end: 4px;
    font-weight: 500;
    font-size: 18px;
    line-height: 1.3;
  }

  // .article-footer__count
  &__count {
    margin-block-end: 16px;
    color: variables.$color-1d1d1d;

    @media (min-width: #{1024 + 0.1px}) {
      line-height: 1.6;
    }

    @media (max-width: 1024px) {
      letter-spacing: 0.01em;
    }
  }
}
